/*! For license information please see main.6153304a.chunk.js.LICENSE.txt */
(this["webpackJsonppipeline-editor"]=this["webpackJsonppipeline-editor"]||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(12),c=n.n(a),i=(n(85),n(86),n(8)),s=n(14),u=n(23),p=n.n(u),l=n(20),d=n(5),m=n(3),f=n.n(m),b=n(9),v=n(11),h=n.n(v),j=function(e){return"container"in e},g=function(e){return"graph"in e},x="components",O="digest_to_component_data",k="digest_to_component_spec",w="url_to_digest",y="digest_to_canonical_url",_="file_store_",S=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?(new TextEncoder).encode(t):t,e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,o=Array.from(new Uint8Array(r)),a=o.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.a.createInstance({name:x,storeName:k}),o=h.a.createInstance({name:x,storeName:"digest_to_component_name"}),e.next=4,r.setItem(t,n);case 4:if(void 0===n.name){e.next=7;break}return e.next=7,o.setItem(t,n.name);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="string"===typeof t?t:(new TextDecoder).decode(t),r="string"===typeof t?(new TextEncoder).encode(t):t,"object"===typeof(o=p.a.load(n))&&null!==o){e.next=5;break}throw Error("componentText is not a YAML-encoded object: ".concat(o));case 5:if("implementation"in o){e.next=7;break}throw Error("componentText does not encode a valid pipeline component: ".concat(o));case 7:return a=o,e.next=10,S(r);case 10:return c=e.sent,i={componentRef:{spec:a,digest:c},data:r},e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?(new TextEncoder).encode(t):t,e.next=3,I(t);case 3:return r=e.sent,o=h.a.createInstance({name:x,storeName:O}),a=r.componentRef,e.next=8,o.setItem(r.componentRef.digest,n);case 8:return e.next=10,C(a.digest,a.spec);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i,s,u,p,l,d,m,b,v,j,g=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]&&g[1],r=h.a.createInstance({name:x,storeName:w}),o=h.a.createInstance({name:x,storeName:k}),a=h.a.createInstance({name:x,storeName:O}),e.next=6,r.getItem(t);case 6:if(null===(c=e.sent)){e.next=21;break}return e.next=10,o.getItem(c);case 10:return i=e.sent,e.next=13,a.getItem(c);case 13:if(s=e.sent,null===i||null===s){e.next=20;break}return u={componentRef:{url:t,digest:c,spec:i},data:s},e.abrupt("return",u);case 20:console.error("Component db is corrupted: Component with url ".concat(t," was added before with digest ").concat(c," but now has no content in the DB."));case 21:return e.next=23,fetch(t);case 23:return p=e.sent,e.next=26,p.arrayBuffer();case 26:return l=e.sent,e.next=29,A(l);case 29:if(d=e.sent,(m=d.componentRef).url=t,void 0!==(b=m.digest)){e.next=36;break}return console.error("Cannot happen: storeComponentText has returned componentReference with digest === undefined."),e.abrupt("return",d);case 36:return null!==c&&b!==c&&console.error("Component db is corrupted: Component with url ".concat(t," previously had digest ").concat(c," but now has digest ").concat(b,".")),v=h.a.createInstance({name:x,storeName:y}),e.next=40,v.getItem(b);case 40:if(null!==(j=e.sent)){e.next=46;break}return e.next=44,v.setItem(b,t);case 44:e.next=51;break;case 46:if(t===j){e.next=51;break}if(console.debug('The component with digest "'.concat(b,'" is being loaded from "').concat(t,'", but was previously loaded from "').concat(j,'".')+(n?" Changing the canonical url.":"")),!n){e.next=51;break}return e.next=51,v.setItem(b,t);case 51:return e.next=53,r.setItem(t,b);case 53:return e.abrupt("return",d);case 54:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},R=function(){var e=Object(b.a)(f.a.mark((function e(t,n,r){var o,a,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return o=_+t,a=h.a.createInstance({name:x,storeName:o}),e.next=6,a.getItem(n);case 6:return c=e.sent,i=new Date,s=null===c?{componentRef:r.componentRef,name:n,creationTime:i,modificationTime:i,data:r.data}:Object(d.a)(Object(d.a)({},c),{},{name:n,modificationTime:i,data:r.data,componentRef:r.componentRef}),e.next=11,a.setItem(n,s);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o,a,c,i,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:"Component",e.next=3,V(t);case 3:return o=_+t,a=h.a.createInstance({name:x,storeName:o}),e.t0=Set,e.next=8,a.keys();case 8:return e.t1=e.sent,c=new e.t0(e.t1),i=E(r,c),e.abrupt("return",R(t,i,n));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:"Component",e.next=3,T(n);case 3:return a=e.sent,e.abrupt("return",N(t,a,null!==(r=a.componentRef.spec.name)&&void 0!==r?r:o));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(f.a.mark((function e(t,n,r){var o,a,c,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:"Component",e.next=3,A(n);case 3:return c=e.sent,e.abrupt("return",N(t,c,null!==(o=null!==r&&void 0!==r?r:c.componentRef.spec.name)&&void 0!==o?o:a));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(f.a.mark((function e(t,n,r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(r);case 2:return o=e.sent,e.abrupt("return",R(t,n,o));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return n=_+t,r=h.a.createInstance({name:x,storeName:n}),o=new Map,e.next=7,r.iterate((function(e,t,n){o.set(t,e)}));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return r=_+t,o=h.a.createInstance({name:x,storeName:r}),e.abrupt("return",o.getItem(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return r=_+t,o=h.a.createInstance({name:x,storeName:r}),e.abrupt("return",o.removeItem(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){return p.a.dump(e,{lineWidth:1e4})},V=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i,s,u,p,d,m,b,v,j,g,k,w,y,C,I,A,T,R,N,D,P,U,L,G,M;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="component_list_format_version_"+t,o=h.a.createInstance({name:x,storeName:"component_store_settings"}),a=_+t,c=h.a.createInstance({name:x,storeName:a}),e.next=6,o.getItem(r);case 6:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=10;break}e.t0=void 0!==n;case 10:if(!e.t0){e.next=14;break}e.t2=n,e.next=15;break;case 14:e.t2=1;case 15:if(i=e.t2,[1,2,3].includes(i)){e.next=18;break}throw Error('upgradeComponentListDb: Unknown component list version "'.concat(i,'" for the list ').concat(t));case 18:if(1!==i){e.next=60;break}return console.log("componentStore: Upgrading the component list DB ".concat(t)),u=h.a.createInstance({name:x,storeName:"component_ref_lists"}),e.next=23,u.getItem(t);case 23:if(e.t4=s=e.sent,e.t3=null!==e.t4,!e.t3){e.next=27;break}e.t3=void 0!==s;case 27:if(!e.t3){e.next=31;break}e.t5=s,e.next=32;break;case 31:e.t5=[];case 32:p=e.t5,d=new Set,m="user_pipelines"===t?"Pipeline":"Component",b=Object(l.a)(p),e.prev=36,b.s();case 38:if((v=b.n()).done){e.next=48;break}return g=v.value,k=null!==(j=g.spec.name)&&void 0!==j?j:m,w=E(k,d),y={componentRef:g},e.next=45,c.setItem(w,y);case 45:d.add(w);case 46:e.next=38;break;case 48:e.next=53;break;case 50:e.prev=50,e.t6=e.catch(36),b.e(e.t6);case 53:return e.prev=53,b.f(),e.finish(53);case 56:return e.next=58,o.setItem(r,2);case 58:i=2,console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(i));case 60:if(2!==i){e.next=107;break}return C=h.a.createInstance({name:x,storeName:O}),e.next=64,c.keys();case 64:I=e.sent,A=Object(l.a)(I),e.prev=66,A.s();case 68:if((T=A.n()).done){e.next=95;break}return R=T.value,e.next=72,c.getItem(R);case 72:if(null!==(N=e.sent)){e.next=75;break}throw Error('File "'.concat(R,'" has disappeared during upgrade'));case 75:return D=N.componentRef,e.next=78,C.getItem(N.componentRef.digest);case 78:if(null!==(P=e.sent)){e.next=89;break}return console.error('Db is corrupted: Could not find data for file "'.concat(R,'" with digest ').concat(N.componentRef.digest,".")),U=B(N.componentRef.spec),P=(new TextEncoder).encode(U),e.next=85,S(P);case 85:throw L=e.sent,D.digest=L,console.warn('The component "'.concat(R,'" was re-serialized. Old digest: ').concat(N.componentRef.digest,". New digest ").concat(L,".")),Error('Db is corrupted: Could not find data for file "'.concat(R,'" with digest ').concat(N.componentRef.digest,"."));case 89:return G=new Date,M={name:R,creationTime:G,modificationTime:G,data:P,componentRef:D},e.next=93,c.setItem(R,M);case 93:e.next=68;break;case 95:e.next=100;break;case 97:e.prev=97,e.t7=e.catch(66),A.e(e.t7);case 100:return e.prev=100,A.f(),e.finish(100);case 103:return i=3,e.next=106,o.setItem(r,i);case 106:console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(i));case 107:case"end":return e.stop()}}),e,null,[[36,50,53,56],[66,97,100,103]])})));return function(t){return e.apply(this,arguments)}}(),W=n(4),F=n(17),J=n(1),X=function(e){var t,n=e.componentSpec,r=e.componentArguments,o=e.setComponentArguments,a=e.shrinkToWidth,c=void 0!==a&&a;return Object(J.jsx)("div",{className:"highlight-invalid-inputs",style:{display:"table",borderSpacing:"5px",tableLayout:c?"fixed":"auto",width:"100%"},children:(null!==(t=n.inputs)&&void 0!==t?t:[]).map((function(e){var t,n=e.name,a=void 0,c=void 0,i=r[n];void 0===i?a=e.default:"string"===typeof i?a=i:c="taskOutput"in i?"<from task ".concat(i.taskOutput.taskId," / ").concat(i.taskOutput.outputName,">"):"graphInput"in i?"<from graph input ".concat(i.graphInput.inputName,">"):"<reference>";var s,u=!(n in r)&&!0!==e.optional&&void 0===e.default,p=(void 0===(s=e.type)?"Any":"string"===typeof s?s:JSON.stringify(s))+(!0===e.optional?"?":"");return Object(J.jsxs)("div",{style:{display:"table-row"},children:[Object(J.jsx)("label",{title:"".concat(n," (").concat(p,")"),style:{textAlign:"right",display:"table-cell",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Object(J.jsxs)("span",{children:[n," (",Object(J.jsx)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",maxWidth:"90px",display:"inline-block",verticalAlign:"bottom"},title:p,children:p}),")"]})}),Object(J.jsx)("input",{style:{display:"table-cell",borderWidth:"1px",minWidth:"50px",maxWidth:"100%"},placeholder:c,required:u,value:null!==(t=a)&&void 0!==t?t:"",pattern:void e.type,onChange:function(e){r[n]=e.target.value,o(Object(d.a)({},r))}}),Object(J.jsx)("div",{style:{display:"table-cell",width:"30px"},children:Object(J.jsx)("button",{type:"button",title:"Reset to default",onClick:function(e){delete r[n],o(Object(d.a)({},r))},disabled:!(n in r),children:"\u2327"})})]},n)}))})},H=function(e){var t=e.taskSpec,n=e.closeEditor,o=e.setArguments,a=Object(r.useState)(Object(d.a)({},t.arguments)),c=Object(i.a)(a,2),s=c[0],u=c[1],p=t.componentRef.spec;return void 0===p?(console.error("ArgumentsEditor called with missing taskSpec.componentRef.spec",t),Object(J.jsx)(J.Fragment,{})):Object(J.jsxs)("form",{onSubmit:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{position:"fixed",background:"white",border:"1px solid black",borderRadius:"4px",padding:"15px"},children:[Object(J.jsxs)("legend",{children:["Input arguments for ",p.name]}),Object(J.jsx)(X,{componentSpec:p,componentArguments:s,setComponentArguments:u}),Object(J.jsx)("button",{type:"button",onClick:n,children:"Close"}),Object(J.jsx)("button",{type:"button",onClick:function(e){null===o||void 0===o||o(s),null===n||void 0===n||n()},children:"Apply"})]})},q=s.f.Top,K=s.f.Bottom,Y=function(e){return"task"===e.type&&void 0!==e.data&&"taskSpec"in e.data};function $(e,t,n,r,o){for(var a=[],c=e.length,u=0;u<c;u++){var p,l,d=e[u],m=r+d.name,f=String(100*((u+1)/(c+1)))+"%",b=n===s.f.Top||n===s.f.Bottom?{left:f}:{top:f},v=null!==(p=null===(l=d.type)||void 0===l?void 0:l.toString())&&void 0!==p?p:"Any",h=["handle_".concat(r).concat(v).replace(" ","_")];(null!==o&&void 0!==o?o:[]).includes(d.name)&&h.push("missing-argument"),h=h.map((function(e){return e.replace(" ","_")}));var j=z(n,c),g=Object(i.a)(j,2),x=g[0],O=g[1];a.push(Object(J.jsx)(s.d,{type:t,position:n,id:m,style:b,isConnectable:!0,title:d.name+" : "+v,className:h.join(" "),children:Object(J.jsx)("div",{className:x,style:O,children:d.name})},m))}return a}function z(e,t){var n=180,r="label";return e===s.f.Top||e===s.f.Bottom?(t>1&&(n=180/(t+1)),n<35&&(n=50,r+=" label-angled")):n=60,[r,{maxWidth:"".concat(n,"px")}]}var Q=function(e){var t,n,o,a,c=e.data,s=Object(r.useState)(!1),u=Object(i.a)(s,2),p=u[0],l=u[1],d=c.taskSpec,m=d.componentRef.spec;if(void 0===m)return Object(J.jsx)(J.Fragment,{});var f=null!==(t=m.name)&&void 0!==t?t:"<component>",b=(null!==(n=m.inputs)&&void 0!==n?n:[]).filter((function(e){var t;return!0!==e.optional&&void 0===e.default&&!(e.name in(null!==(t=d.arguments)&&void 0!==t?t:{}))})).map((function(e){return e.name})),v=function(e,t){return $(e,"target",q,"input_",t)}(null!==(o=m.inputs)&&void 0!==o?o:[],b),h=$(null!==(a=m.outputs)&&void 0!==a?a:[],"source",K,"output_"),j=v.concat(h);return Object(J.jsxs)("div",{onDoubleClick:function(){l(!p)},title:c.taskId,children:[f,j,p&&Object(J.jsx)(H,{taskSpec:d,closeEditor:function(){l(!1)},setArguments:c.setArguments})]})},Z=["name","description","metadata","inputs","outputs","implementation"],ee=["children","componentSpec","setComponentSpec"],te="https://cloud-pipelines.github.io/pipeline-editor/",ne=function(e){return"task_"+e},re=function(e){return"input_"+e},oe=function(e){return"output_"+e},ae=function(e){return e.replace(/^task_/,"")},ce=function(e){return e.replace(/^input_/,"")},ie=function(e){return e.replace(/^output_/,"")},se=function(e,t){var n,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=Object(d.a)({},e);var s=function(e){return JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})},u=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==n?n:r},p=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==r?r:n},l=t.filter((function(e){return"input"===e.type})).sort(u),m=t.filter((function(e){return"output"===e.type})).sort(u),f=t.filter(Y).sort(p),b=new Map(l.map((function(e){return[ce(e.id),s(e)]}))),v=new Map(l.map((function(e,t){return[ce(e.id),t]}))),h=function(e,t){var n,r;return(null!==(n=v.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=v.get(t.name))&&void 0!==r?r:1/0)},j=new Map(m.map((function(e){return[ie(e.id),s(e)]}))),x=new Map(m.map((function(e,t){return[ie(e.id),t]}))),O=function(e,t){var n,r;return(null!==(n=x.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=x.get(t.name))&&void 0!==r?r:1/0)},k=new Map(f.map((function(e){return[ae(e.id),s(e)]}))),w=new Map(f.map((function(e,t){return[ae(e.id),t]}))),y=function(e,t){var n,r;return(null!==(n=w.get(e[0]))&&void 0!==n?n:1/0)-(null!==(r=w.get(t[0]))&&void 0!==r?r:1/0)};if(e.inputs=null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){if(!b.has(e.name)||!v.has(e.name))throw Error("The nodes array does not have input node ".concat(e.name));var t=Object(d.a)({},e.annotations);c?t["editor.position"]=b.get(e.name):delete t["editor.position"];var n=Object(d.a)(Object(d.a)({},e),{},{annotations:t});return 0===Object.keys(t).length&&delete n.annotations,n})).sort(h),e.outputs=null===(r=e.outputs)||void 0===r?void 0:r.map((function(e){if(!j.has(e.name)||!x.has(e.name))throw Error("The nodes array does not have output node ".concat(e.name));var t=Object(d.a)({},e.annotations);c?t["editor.position"]=j.get(e.name):delete t["editor.position"];var n=Object(d.a)(Object(d.a)({},e),{},{annotations:t});return void 0!==t&&0!==Object.keys(t).length||delete n.annotations,n})).sort(O),!g(e.implementation))return e;var _=Object(d.a)({},e.implementation.graph),S=Object.fromEntries(Object.entries(_.tasks||{}).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];if(!k.has(n)||!w.has(n))throw Error("The nodes array does not have task node ".concat(n));var o=Object(d.a)({},r.annotations);c?o["editor.position"]=k.get(n):delete o["editor.position"];var s=Object(d.a)(Object(d.a)({},r),{},{annotations:o});return void 0!==o&&0!==Object.keys(o).length||delete s.annotations,a||void 0===s.componentRef.spec||void 0===s.componentRef.url||(s.componentRef=Object(d.a)({},s.componentRef),delete s.componentRef.spec),[n,s]})).sort(y));void 0!==S&&(_.tasks=S),e=Object(d.a)(Object(d.a)({},e),{},{implementation:Object(d.a)(Object(d.a)({},e.implementation),{},{graph:_})});var C=function(e){var t=e.name,n=e.description,r=e.metadata,o=e.inputs,a=e.outputs,c=e.implementation,i=Object(W.a)(e,Z);return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},t&&{name:t}),n&&{description:n}),r&&{metadata:r}),o&&{inputs:o}),a&&{outputs:a}),{},{implementation:c},i)};return e=C(e=Object(d.a)(Object(d.a)({},e),{},{metadata:Object(d.a)(Object(d.a)({},e.metadata),{},{annotations:Object(d.a)(Object(d.a)({},null===(o=e.metadata)||void 0===o?void 0:o.annotations),{},Object(F.a)({},"sdk",te))})}))},ue={task:Object(r.memo)(Q)},pe=function(e){var t,n,o,a=e.children,c=e.componentSpec,u=void 0===c?{implementation:{graph:{tasks:{}}}}:c,p=e.setComponentSpec,m=Object(W.a)(e,ee),f=Object(r.useState)(),b=Object(i.a)(f,2),v=b[0],h=b[1];if(!("graph"in u.implementation))return Object(J.jsx)(J.Fragment,{});var j=u.implementation.graph,g=Object.entries(j.tasks).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1],o={x:0,y:0};if(void 0!==r.annotations)try{var a=r.annotations["editor.position"],c=JSON.parse(a);o={x:c.x,y:c.y}}catch(s){}return{id:ne(n),data:{taskSpec:r,taskId:n,setArguments:function(e){return C(n,e)}},position:o,type:"task"}})),x=(null!==(t=u.inputs)&&void 0!==t?t:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(o){}return{id:re(e.name),data:{label:e.name},position:t,type:"input"}})),O=(null!==(n=u.outputs)&&void 0!==n?n:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(o){}return{id:oe(e.name),data:{label:e.name},position:t,type:"output"}})),k=Object.entries(j.tasks).flatMap((function(e){var t,n=Object(i.a)(e,2),r=n[0],o=n[1];return Object.entries(null!==(t=o.arguments)&&void 0!==t?t:{}).flatMap((function(e){var t=Object(i.a)(e,2),n=t[0],o=t[1];if("string"===typeof o)return[];if("taskOutput"in o){var a=o.taskOutput;return[{id:"".concat(a.taskId,"_").concat(a.outputName,"-").concat(r,"_").concat(n),source:ne(a.taskId),sourceHandle:"output_".concat(a.outputName),target:ne(r),targetHandle:"input_".concat(n),arrowHeadType:s.a.ArrowClosed}]}if("graphInput"in o){var c=o.graphInput;return[{id:"Input_".concat(c.inputName,"-").concat(r,"_").concat(n),source:re(c.inputName),sourceHandle:null,target:ne(r),targetHandle:"input_".concat(n),arrowHeadType:s.a.ArrowClosed}]}return console.error("Impossible task input argument kind: ",o),[]}))})),w=Object.entries(null!==(o=j.outputValues)&&void 0!==o?o:{}).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1].taskOutput;return{id:"".concat(r.taskId,"_").concat(r.outputName,"-Output_").concat(n),source:ne(r.taskId),sourceHandle:"output_".concat(r.outputName),target:oe(n),targetHandle:null,arrowHeadType:s.a.ArrowClosed}})),y=g.concat(x).concat(O).concat(k).concat(w),_=function(e){u=e,p(e)},S=function(e){j=e,_(Object(d.a)(Object(d.a)({},u),{},{implementation:{graph:j}}))},C=function(e,t){var n=Object(d.a)(Object(d.a)({},j),{},{tasks:Object(d.a)({},j.tasks)});n.tasks[e]=Object(d.a)(Object(d.a)({},j.tasks[e]),{},{arguments:t}),S(n)},I=function(e,t,n){var r=j.tasks[e].arguments,o=Object(d.a)({},r);void 0===n?delete o[t]:o[t]=n,C(e,o)},A=function(e,t){return I(e,t,void 0)},T=function(e,t){var n=Object(d.a)({},j.outputValues);void 0===t?delete n[e]:n[e]=t,j=Object(d.a)(Object(d.a)({},j),{},{outputValues:n}),S(j)},E=function(e){return T(e)},R=function(e){var t,n;if(null!==e.source&&null!==e.target){var r=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,""),o=null===(n=e.sourceHandle)||void 0===n?void 0:n.replace(/^output_/,"");if(void 0!==o){var a={taskOutput:{taskId:ae(e.source),outputName:o}};void 0!==r?I(ae(e.target),r,a):T(ie(e.target),a)}else{var c={graphInput:{inputName:ce(e.source)}};void 0!==r?I(ae(e.target),r,c):console.error("addConnection: Cannot directly connect graph input to graph output: ",e)}}else console.error("addConnection called with missing source or target: ",e)},N=function(e){var t,n=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,"");void 0!==n?A(ae(e.target),n):E(ie(e.target))},D=function(e){if("input"===e.type)!function(e){for(var t,n=0,r=Object.entries(j.tasks);n<r.length;n++)for(var o=Object(i.a)(r[n],2),a=o[0],c=o[1],s=0,p=Object.entries(null!==(l=c.arguments)&&void 0!==l?l:{});s<p.length;s++){var l,m=Object(i.a)(p[s],2),f=m[0],b=m[1];"string"!==typeof b&&"graphInput"in b&&b.graphInput.inputName===e&&A(a,f)}var v=(null!==(t=u.inputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));u=Object(d.a)(Object(d.a)({},u),{},{inputs:v}),_(u)}(ce(e.id));else if("output"===e.type){!function(e){var t;E(e);var n=(null!==(t=u.outputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));u=Object(d.a)(Object(d.a)({},u),{},{outputs:n}),_(u)}(ie(e.id))}else if("task"===e.type){!function(e){for(var t,n=0,r=Object.entries(j.tasks);n<r.length;n++)for(var o=Object(i.a)(r[n],2),a=o[0],c=o[1],s=0,u=Object.entries(null!==(p=c.arguments)&&void 0!==p?p:{});s<u.length;s++){var p,l=Object(i.a)(u[s],2),m=l[0],f=l[1];"string"!==typeof f&&"taskOutput"in f&&f.taskOutput.taskId===e&&A(a,m)}var b=Object.fromEntries(Object.entries(null!==(t=j.outputValues)&&void 0!==t?t:{}).filter((function(t){var n=Object(i.a)(t,2);return n[0],n[1].taskOutput.taskId!==e})));j=Object(d.a)(Object(d.a)({},j),{},{outputValues:b});var v=Object(d.a)(Object(d.a)({},j),{},{tasks:Object(d.a)({},j.tasks)});delete v.tasks[e],S(v)}(ae(e.id))}else console.log("removeNode: Unexpected note type: ",e)},P=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n};return Object(J.jsx)(s.h,Object(d.a)(Object(d.a)({},m),{},{elements:y,nodeTypes:ue,onConnect:function(e){R(e)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:function(e){if(e.preventDefault(),v){var t=e.dataTransfer.getData("application/reactflow");if(""===t)return;var n=JSON.parse(t),r=Object.keys(n)[0],o=n[r],a=0,c=0,i=e.dataTransfer.getData("DragStart.offset");if(""!==i){var s,p,l=JSON.parse(i);a=null!==(s=.68*l.offsetX)&&void 0!==s?s:0,c=null!==(p=.64*l.offsetY)&&void 0!==p?p:0}var m=v.project({x:e.clientX-a,y:e.clientY-c}),f={x:m.x,y:m.y},b={"editor.position":JSON.stringify(f)};if("task"===r){var h,g,x=o,O=Object(d.a)(Object(d.a)({},x.annotations),b);x.annotations=O;var k=Object(d.a)(Object(d.a)({},x),{},{annotations:O}),w=function(){return P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Task",new Set(Object.keys(j.tasks)))}(null!==(h=null===(g=x.componentRef.spec)||void 0===g?void 0:g.name)&&void 0!==h?h:"Task");(j=Object(d.a)(Object(d.a)({},j),{},{tasks:Object(d.a)({},j.tasks)})).tasks[w]=k,S(j)}else if("input"===r){var y,C={name:function(){var e;return P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Input",new Set(null===(e=u.inputs)||void 0===e?void 0:e.map((function(e){return e.name}))))}(),annotations:b},I=(null!==(y=u.inputs)&&void 0!==y?y:[]).concat([C]);u=Object(d.a)(Object(d.a)({},u),{},{inputs:I}),_(u)}else if("output"===r){var A,T={name:function(){var e;return P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Output",new Set(null===(e=u.outputs)||void 0===e?void 0:e.map((function(e){return e.name}))))}(),annotations:b},E=(null!==(A=u.outputs)&&void 0!==A?A:[]).concat([T]);u=Object(d.a)(Object(d.a)({},u),{},{outputs:E}),_(u)}}},onEdgeUpdate:function(e,t){N(e),R(t)},onElementsRemove:function(e){var t,n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Object(s.i)(r)&&N(r)}}catch(i){n.e(i)}finally{n.f()}var o,a=Object(l.a)(e);try{for(a.s();!(o=a.n()).done;){var c=o.value;Object(s.j)(c)&&D(c)}}catch(i){a.e(i)}finally{a.f()}},onLoad:function(e){return h(e)},children:a}))},le=n(56),de=n(57),me=n(71),fe="https://api.github.com/search",be="raw.githubusercontent.com/.../component.yaml",ve="components",he="hash_to_data",je="hash_to_component_name",ge="url_to_hash",xe="hash_to_url",Oe="url_version",ke="bad_hashes",we=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o,a,c,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,caches.open(n);case 3:return o=e.sent,e.next=6,o.match(t);case 6:if(void 0===(a=e.sent)){e.next=10;break}return r&&o.add(t),e.abrupt("return",a);case 10:return e.next=12,o.add(t);case 12:return e.next=14,o.match(t);case 14:if(void 0!==(c=e.sent)){e.next=17;break}return e.abrupt("return",Promise.reject("Added object to cache, but could not find it"));case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i,s,u,p=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:1,r=p.length>2&&void 0!==p[2]?p[2]:"indexed",o=p.length>3&&void 0!==p[3]?p[3]:"desc",a=encodeURIComponent(t),c=encodeURIComponent(r),i=encodeURIComponent(o),s="https://api.github.com/search/code?q=".concat(a,"&sort=").concat(c,"&order=").concat(i,"&per_page=100&page=").concat(n),e.next=9,we(s,fe,!0);case 9:return u=e.sent,e.abrupt("return",u.json());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(e){return e.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/")};function Se(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(me.a)(f.a.mark((function e(){var t,n,r,o,a,c,i,s,u,p=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=p.length>0&&void 0!==p[0]?p[0]:["kubeflow","Ark-kun"],n=[],r="filename:component.yaml "+t.map((function(e){return"user:"+e})).join(" "),o=1;case 4:if(!(o<100)){e.next=33;break}return e.next=7,Object(de.a)(ye(r,o));case 7:if(a=e.sent,0!==(c=a.items).length){e.next=11;break}return e.abrupt("break",33);case 11:i=Object(l.a)(c),e.prev=12,i.s();case 14:if((s=i.n()).done){e.next=20;break}return u=s.value,e.next=18,{url:_e(u.html_url),hash:u.sha};case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.next=30,Object(de.a)(new Promise((function(e){return setTimeout(e,6e3*1.1)})));case 30:o++,e.next=4;break;case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})))).apply(this,arguments)}var Ie,Ae,Te=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,be);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,r.text();case 8:return o=e.sent,a=p.a.load(o),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,o,a,c,i,s,u,l,d,m,b,v,j,g,x,O,k,w,y,_,S,C,I,A=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=A.length>0&&void 0!==A[0]?A[0]:["kubeflow","Ark-kun"],console.debug("Starting cacheAllComponents"),n=Se(t),r=h.a.createInstance({name:ve,storeName:ge}),o=h.a.createInstance({name:ve,storeName:xe}),a=h.a.createInstance({name:ve,storeName:he}),c=h.a.createInstance({name:ve,storeName:je}),i=h.a.createInstance({name:ve,storeName:Oe}),s=h.a.createInstance({name:ve,storeName:ke}),u=!0,l=!1,e.prev=11,m=Object(le.a)(n);case 13:return e.next=15,m.next();case 15:return b=e.sent,u=b.done,e.next=19,b.value;case 19:if(v=e.sent,u){e.next=90;break}return g=(j=v).hash.toLowerCase(),x=j.url,e.next=26,s.getItem(g);case 26:if(null===(O=e.sent)){e.next=30;break}return console.debug("Skipping url ".concat(x," with hash ").concat(g,' due to error: "').concat(O,'"')),e.abrupt("continue",87);case 30:if(e.prev=30,(k=_e(x)).endsWith("component.yaml")){e.next=35;break}return console.debug("Skipping url ".concat(k,' since it does not end with "component.yaml"')),e.abrupt("continue",87);case 35:return e.next=37,r.getItem(k);case 37:return null!==(w=e.sent)&&w!==g&&console.error("Component cache is broken. Stored hash for ".concat(k,": ").concat(w," != ").concat(g,".")),e.next=41,i.getItem(k);case 41:if(y=e.sent,!(null!==w&&null!==y&&Number.parseInt(y)>=1)){e.next=44;break}return e.abrupt("continue",87);case 44:return console.debug("Processing new component candidate: ".concat(k,".")),e.next=47,we(k,be);case 47:return _=e.sent,S=void 0,C=void 0,e.prev=50,e.next=53,_.blob();case 53:return I=e.sent,e.next=56,I.text();case 56:C=e.sent,S=p.a.load(C),e.next=64;break;case 60:return e.prev=60,e.t0=e.catch(50),s.setItem(g,e.t0.name+": "+e.t0.message),e.abrupt("continue",87);case 64:if(void 0!==S.implementation){e.next=67;break}return s.setItem(g,'Component lacks the "implementation" section.'),e.abrupt("continue",87);case 67:return e.next=69,a.setItem(g,C);case 69:return e.next=71,o.getItem(g);case 71:if(null!==e.sent){e.next=75;break}return e.next=75,o.setItem(g,k);case 75:if(!S.name){e.next=78;break}return e.next=78,c.setItem(g,S.name);case 78:return e.next=80,r.setItem(k,g);case 80:return e.next=82,i.setItem(k,1);case 82:e.next=87;break;case 84:e.prev=84,e.t1=e.catch(30),console.error("Error when processing component candidate ".concat(x," Error: ").concat(e.t1,"."));case 87:u=!0,e.next=13;break;case 90:e.next=96;break;case 92:e.prev=92,e.t2=e.catch(11),l=!0,d=e.t2;case 96:if(e.prev=96,e.prev=97,u||null==m.return){e.next=101;break}return e.next=101,m.return();case 101:if(e.prev=101,!l){e.next=104;break}throw d;case 104:return e.finish(101);case 105:return e.finish(96);case 106:console.debug("Finished cacheAllComponents");case 107:case"end":return e.stop()}}),e,null,[[11,92,96,106],[30,84],[50,60],[97,,101,105]])})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,o,a,c,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:["kubeflow","Ark-kun"],n=h.a.createInstance({name:ve,storeName:xe}),r=h.a.createInstance({name:ve,storeName:he}),o=new Map,a=Ee(t),e.next=7,r.length();case 7:if(e.t0=e.sent,0!==e.t0){e.next=11;break}return e.next=11,a;case 11:return e.next=13,r.iterate((function(e,t,n){try{var r=p.a.load(e);o.set(t,{spec:r})}catch(a){console.error("Error when parsing cached component. Hash: ".concat(t,". Error: ").concat(a,". Component text: ").concat(e))}}));case 13:return e.next=15,n.iterate((function(e,t,n){var r=o.get(t);void 0===r?console.error("Component db corrupted: Component with url ".concat(e," and hash ").concat(t," has no content in the DB.")):r.url=e}));case 15:return c=[],o.forEach((function(e,t){void 0===e.url?console.error("Component db corrupted: Component with hash ".concat(t," has content, but no URL in the DB.")):c.push(e)})),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:["kubeflow","Ark-kun"],e.next=3,Re(n);case 3:return r=e.sent,e.abrupt("return",r.filter((function(e){var n,r,o;return null!==(n=null===(r=e.spec)||void 0===r||null===(o=r.name)||void 0===o?void 0:o.toLowerCase().includes(t.toLowerCase()))&&void 0!==n&&n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=["componentReference"],Pe=function(e){var t,n,r=e.componentReference,o=Object(W.a)(e,De);return Object(J.jsx)("div",Object(d.a)(Object(d.a)({className:"react-flow__node react-flow__node-task sidebar-node",draggable:!0,onDragStart:function(e){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"}(e,{task:{componentRef:r}})}},o),{},{children:null!==(t=null===(n=r.spec)||void 0===n?void 0:n.name)&&void 0!==t?t:"Component"}))},Ue=function(e){var t=e.componentUrl,n=Object(r.useState)(void 0),o=Object(i.a)(n,2),a=o[0],c=o[1];return Object(r.useEffect)((function(){Te(t).then(c)}),[t]),void 0===a?Object(J.jsx)("span",{children:"Loading..."}):Object(J.jsx)(Pe,{componentReference:{url:t,spec:a}})},Le=function(e){var t=e.componentGroups;return Object(J.jsx)(J.Fragment,{children:Array.from(t).map((function(e,t){var n=e.category,r=e.componentUrls;return Object(J.jsxs)("details",{open:0===t,style:{border:"1px solid #aaa",borderRadius:"4px"},children:[Object(J.jsx)("summary",{style:{borderWidth:"1px",padding:"8px"},children:Object(J.jsx)("strong",{children:n})}),r.map((function(e){return Object(J.jsx)(Ue,{componentUrl:e},e)}))]},n)}))})},Ge=function(e){var t=e.componentGroups;return Object(J.jsxs)("details",{open:!0,children:[Object(J.jsx)("summary",{style:{border:"1px solid #aaa",padding:"4px",borderRadius:"4px"},children:Object(J.jsx)("strong",{children:"Component library"})}),Object(J.jsx)("div",{style:{paddingLeft:"10px"},children:Object(J.jsx)(Le,{componentGroups:t})})]})},Me=["kubeflow","Ark-kun"],Be=function(e){var t=Object(r.useState)(void 0),n=Object(i.a)(t,2),o=n[0],a=n[1],c=Object(r.useState)(!0),s=Object(i.a)(c,2),u=s[0],p=s[1],l=Object(r.useState)(!1),d=Object(i.a)(l,2),m=d[0],v=d[1],h=Object(r.useState)(""),j=Object(i.a)(h,2),g=j[0],x=j[1],O=Object(r.useState)([]),k=Object(i.a)(O,2),w=k[0],y=k[1];function _(){return(_=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ne(t,Me).then((function(e){v(!0),y(e)}),(function(e){v(!0),a(e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=Object(J.jsx)("span",{});if(u)S=Object(J.jsx)("div",{children:"Enter search query"});else if(void 0!==o)S=Object(J.jsxs)("div",{children:["Error: ",o]});else if(u||m){if(void 0!==w){var C=w.map((function(e){var t;return Object(J.jsx)(Pe,{componentReference:e},null!==(t=e.digest)&&void 0!==t?t:e.url)}));S=Object(J.jsx)(J.Fragment,{children:C})}}else S=Object(J.jsx)("div",{children:"Searching..."});return Object(J.jsxs)("div",{className:"nodeList",children:[Object(J.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),""!==g&&(p(!1),function(e){_.apply(this,arguments)}(g)),null===(t=(n=window).gtag)||void 0===t||t.call(n,"event","ComponentSearch_search",{})},children:[Object(J.jsx)("input",{type:"search",placeholder:"XGBoost",onChange:function(e){x(e.target.value)}}),Object(J.jsx)("input",{type:"submit"})]}),Object(J.jsx)("div",{children:S})]})},Ve=function(e){var t=e.componentSpec,n=Object(s.k)((function(e){return e.nodes})),r="";try{var o=se(t,n,!1,!0);r=B(o)}catch(i){r=String(i)}var a=new Blob([r],{type:"text/yaml"}),c=Object(J.jsx)("a",{href:URL.createObjectURL(a),download:"component.yaml",children:"component.yaml"});return Object(J.jsxs)("details",{children:[Object(J.jsxs)("summary",{children:["Graph ",c]}),Object(J.jsx)("pre",{style:{overflow:"auto"},children:r})]})};!function(e){e.PRIMITIVE_TYPE_UNSPECIFIED="PRIMITIVE_TYPE_UNSPECIFIED",e.INT="INT",e.DOUBLE="DOUBLE",e.STRING="STRING"}(Ie||(Ie={})),function(e){e.TRIGGER_STRATEGY_UNSPECIFIED="TRIGGER_STRATEGY_UNSPECIFIED",e.ALL_UPSTREAM_TASKS_SUCCEEDED="ALL_UPSTREAM_TASKS_SUCCEEDED",e.ALL_UPSTREAM_TASKS_COMPLETED="ALL_UPSTREAM_TASKS_COMPLETED"}(Ae||(Ae={}));var We=function(e){return e.toLowerCase().replace(/\W/,"-")},Fe=function(e,t){var n,r;if(!j(e.implementation))throw Error("resolveCommandLine only supports container components");var o=e.implementation.container,a=new Set,c=new Set,i=function e(n){if("string"==typeof n)return[n];if("inputValue"in n){var r=n.inputValue,o=t[r];return void 0!==o&&"string"!=typeof o&&"taskOutput"in o?(c.add(r),["{{$.inputs.artifacts['".concat(r,"'].value}}")]):(a.add(r),["{{$.inputs.parameters['".concat(r,"']}}")])}if("inputPath"in n){var i=n.inputPath;return c.add(i),["{{$.inputs.artifacts['".concat(i,"'].path}}")]}if("outputPath"in n){var s=n.outputPath;return["{{$.outputs.artifacts['".concat(s,"'].path}}")]}if("if"in n){var u=[n.if.cond,n.if.then,n.if.else],p=u[0],l=u[1],d=u[2],m=!1;if("string"===typeof p)m="true"===p.toLowerCase();else if("boolean"===typeof p)m=p;else if("isPresent"in p){m=p.isPresent in t}else{if(!("inputValue"in p))throw Error("Unexpected condition kind: "+p);var f=p.inputValue;if(f in t){var b=t[f];if("string"!==typeof b)throw Error("Using runtime conditions in component command line placeholders is not supported yet.");m="true"===b.toLowerCase()}else m=!1}var v=m?l:d;return void 0===v?[]:v.flatMap(e)}if("concat"in n)return[n.concat.flatMap(e).join("")];throw Error("Unknown kind of command-line argument: ".concat(n))};return{command:null===(n=o.command)||void 0===n?void 0:n.flatMap(i),args:null===(r=o.args)||void 0===r?void 0:r.flatMap(i),inputsConsumedAsValue:a,inputsConsumedAsPath:c}},Je=function(e){if("string"===typeof e){if(["integer"].includes(e.toLowerCase()))return Ie.INT;if(["float","double"].includes(e.toLowerCase()))return Ie.DOUBLE}return Ie.STRING},Xe=function(e){return{type:Je(e)}},He=function(e,t){switch(t){case Ie.STRING:return{stringValue:e};case Ie.INT:return{intValue:parseInt(e)};case Ie.DOUBLE:return{doubleValue:parseFloat(e)};default:throw Error("Unknown primitive type ".concat(t))}},qe="_make_artifact",Ke="_make_artifact",Ye="parameter",$e="artifact",ze={componentRef:{name:qe},taskInfo:{name:"Make artifact"},inputs:{parameters:{}},cachingOptions:{enableCache:!0}},Qe={executorLabel:Ke,inputDefinitions:{parameters:Object(F.a)({},Ye,{type:Ie.STRING})},outputDefinitions:{artifacts:Object(F.a)({},$e,{artifactType:{schemaTitle:"system.Artifact"}})}},Ze={container:{image:"alpine",command:["sh","-ec",'mkdir -p "$(dirname "$1")"; printf "%s" "$0" > "$1"',"{{$.inputs.parameters['".concat(Ye,"']}}"),"{{$.outputs.artifacts['".concat($e,"'].path}}")]}},et=function(e,t,n){var r,o,a,c,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!j(e.implementation))throw Error("Nested graph components are not supported yet");var s=e.implementation.container,u=Fe(e,t),p={container:{image:s.image,command:u.command,args:u.args}},l=new Map((null!==(r=e.inputs)&&void 0!==r?r:[]).map((function(e){return[e.name,e]}))),m={parameters:Object.fromEntries(Array.from(u.inputsConsumedAsValue.values()).map((function(e){var t;return[e,Xe(null===(t=l.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(u.inputsConsumedAsPath.values()).map((function(e){var t;return[e,(null===(t=l.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},f={parameters:{},artifacts:Object.fromEntries((null!==(o=e.outputs)&&void 0!==o?o:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},b={inputDefinitions:m,outputDefinitions:f,executorLabel:"<set later>"},v=null!==(a=m.parameters)&&void 0!==a?a:{},h=Object.fromEntries(Array.from(u.inputsConsumedAsValue.values()).map((function(e){return[e,function(e){var n=t[e];if(void 0===n){var r=l.get(e);if(void 0===r)throw Error("Cannot happen: vertexTaskParameterArguments - inputMap.get(".concat(e,") === undefined"));if(void 0!==r.default)n=r.default;else{if(!0!==r.optional)throw Error('Argument was not provided for required input "'.concat(e,'"'));console.error('Input "'.concat(e,"\" is optional, but command-line still uses it when when it's not present.")),n=""}}if("string"===typeof n)return{runtimeValue:{constantValue:He(n,v[e].type)}};if("graphInput"in n)return{componentInputParameter:n.graphInput.inputName};if("taskOutput"in n)return{taskOutputParameter:{producerTask:n.taskOutput.taskId,outputParameterKey:n.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(n,'"'))}(e)]}))),g={},x=Object.fromEntries(Array.from(u.inputsConsumedAsPath.values()).map((function(e){return[e,function(e){var r,o=t[e];if(void 0===o){var a=l.get(e);if(void 0===a)throw Error("Cannot happen: vertexTaskParameterArguments - inputMap.get(".concat(e,") === undefined"));if(void 0!==a.default)o=a.default;else{if(!0!==a.optional)throw Error('Argument was not provided for required input "'.concat(e,'"'));console.error('Input "'.concat(e,"\" is optional, but command-line still uses it when when it's not present.")),o=""}}if("string"===typeof o){var c=n("Make artifact"),s=Object(d.a)(Object(d.a)({},ze),{},{inputs:{parameters:Object(F.a)({},Ye,{runtimeValue:{constantValue:{stringValue:o}}})}});return g[c]=s,r={taskOutputArtifact:{producerTask:c,outputArtifactKey:$e}}}if("graphInput"in o){if(i){var u="Make artifact for "+o.graphInput.inputName,p=Object(d.a)(Object(d.a)({},ze),{},{inputs:{parameters:Object(F.a)({},Ye,{componentInputParameter:o.graphInput.inputName})}});g[u]=p,r={taskOutputArtifact:{producerTask:u,outputArtifactKey:$e}}}else r={componentInputArtifact:o.graphInput.inputName};return r}if("taskOutput"in o)return r={taskOutputArtifact:{producerTask:o.taskOutput.taskId,outputArtifactKey:o.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(o,'"'))}(e)]}))),O={taskInfo:{name:null!==(c=e.name)&&void 0!==c?c:"Component"},inputs:{parameters:h,artifacts:x},cachingOptions:{enableCache:!0},componentRef:{name:"<set later>"}};return{vertexTaskSpec:O,vertexComponentSpec:b,vertexExecutorSpec:p,vertexMakeArtifactTaskSpecs:g}},tt=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},nt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pipeline";if(!g(e.implementation))throw Error("Only graph components are supported for now");for(var r={parameters:Object.fromEntries((null!==(t=e.inputs)&&void 0!==t?t:[]).map((function(e){return[e.name,Xe(e.type)]})))},o=e.implementation.graph,a={},c={},s={},u=new Set(Object.keys(o.tasks)),p=function(e){var t=tt(e,u);return u.add(t),t},l=0,d=Object.entries(o.tasks);l<d.length;l++){var m=Object(i.a)(d[l],2),f=m[0],b=m[1];if(void 0===b.componentRef.spec)throw Error('Task "'.concat(f,'" does not have taskSpec.componentRef.spec.'));try{var v,h=et(b.componentRef.spec,null!==(v=b.arguments)&&void 0!==v?v:{},p,!0),j=h.vertexTaskSpec,x=h.vertexComponentSpec,O=h.vertexExecutorSpec,k=h.vertexMakeArtifactTaskSpecs,w=f+"_executor",y=f+"_component",_=f;u.add(_),a[w]=O,x.executorLabel=w,c[y]=x,j.componentRef.name=y,s[_]=j;for(var S=0,C=Object.entries(k);S<C.length;S++){var I=Object(i.a)(C[S],2),A=I[0],T=I[1];u.add(A),a._make_artifact=Ze,c._make_artifact=Qe,s[A]=T}}catch(R){throw Error("Error compiling task ".concat(f,": ")+R.toString())}}var E={pipelineInfo:{name:We(n)},sdkVersion:"Cloud-Pipelines",schemaVersion:"2.0.0",deploymentSpec:{executors:a},components:c,root:{inputDefinitions:r,dag:{tasks:s}}};return E},rt="GoogleCloudSubmitter/gcsOutputDirectory",ot="GoogleCloudSubmitter/projectId",at="GoogleCloudSubmitter/region",ct="GoogleCloudSubmitter/projectIds",it="640001104961-2m8hs192tmd9f9nssbr5thr5o3uhmita.apps.googleusercontent.com",st=["us-central1","us-east1","us-west1","europe-west1","europe-west2","europe-west4","asia-east1","asia-southeast1","northamerica-northeast1"],ut=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=o.length>2&&void 0!==o[2]?o[2]:it,e.abrupt("return",new Promise((function(e,o){gapi.auth.authorize({client_id:r,scope:t,immediate:n},(function(n){if(void 0===n)console.error("authorizeGoogleCloudClient failed"),o("gapi.auth.authorize result is undefined");else if(n.error)console.error("authorizeGoogleCloudClient failed",n.error),o(n.error);else{var r=n.scope,a=null===r||void 0===r?void 0:r.split(" ");if(void 0!==a&&t.every((function(e){return a.includes(e)})))e(n);else{var c="Authorization call succeeded, but the returned scopes are ".concat(r);console.error(c),o(c)}}}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut(t,!0);case 3:null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_auth",{result:"succeeded",immediate:"true"}),e.next=17;break;case 6:return e.prev=6,e.t0=e.catch(0),e.prev=8,e.next=11,ut(t,!1);case 11:null===(o=(a=window).gtag)||void 0===o||o.call(a,"event","GoogleCloud_auth",{result:"succeeded",immediate:"false"}),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(8),null===(c=(i=window).gtag)||void 0===c||c.call(i,"event","GoogleCloud_auth",{result:"failed",immediate:"false"});case 17:case"end":return e.stop()}}),e,null,[[0,6],[8,14]])})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,pt(["https://www.googleapis.com/auth/cloud-platform"]);case 3:return e.next=5,gapi.client.request({path:"https://cloudresourcemanager.googleapis.com/v1/projects/"});case 5:return t=e.sent,e.abrupt("return",t.result);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>1&&void 0!==i[1]?i[1]:"us-central1",a=i.length>2?i[2]:void 0,e.next=4,pt(["https://www.googleapis.com/auth/cloud-platform"]);case 4:return e.next=6,gapi.client.request({path:"https://".concat(o,"-aiplatform.googleapis.com/v1beta1/projects/").concat(t,"/locations/").concat(o,"/pipelineJobs"),method:"POST",body:JSON.stringify(a)});case 6:return c=e.sent,null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_submit_pipeline_job",{result:"succeeded"}),e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(e){var t,n,o=e.componentSpec,a=Object(r.useState)((function(){var e,t;return JSON.parse(null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(ct))&&void 0!==e?e:"[]")})),c=Object(i.a)(a,2),s=c[0],u=c[1],p=Object(r.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(ot))&&void 0!==e?e:""})),l=Object(i.a)(p,2),m=l[0],v=l[1],h=Object(r.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(at))&&void 0!==e?e:"us-central1"})),j=Object(i.a)(h,2),g=j[0],x=j[1],O=Object(r.useState)(""),k=Object(i.a)(O,2),w=k[0],y=k[1],_=Object(r.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(rt))&&void 0!==e?e:""})),S=Object(i.a)(_,2),C=S[0],I=S[1],A=Object(r.useState)(""),T=Object(i.a)(A,2),E=T[0],R=T[1],N=Object(r.useState)(""),D=Object(i.a)(N,2),P=D[0],U=D[1],L=Object(r.useState)({}),G=Object(i.a)(L,2),M=G[0],B=G[1],V=void 0,W=void 0;if(void 0!==o){var F,H=Object.fromEntries((null!==(F=o.inputs)&&void 0!==F?F:[]).filter((function(e){return void 0!==e.default})).map((function(e){return[e.name,String(e.default)]}))),q=Object(d.a)(Object(d.a)({},H),M),K=new Map(Object.entries(q).filter((function(e){return"string"===typeof e[1]})));try{(W=function(e,t,n){var r,o,a,c=nt(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pipeline"),s=null!==(r=(null!==(o=c.root.inputDefinitions)&&void 0!==o?o:{}).parameters)&&void 0!==r?r:{},u={};if(void 0!==n)for(var p=0,l=Array.from(n.entries());p<l.length;p++){var d=Object(i.a)(l[p],2),m=d[0],f=d[1];u[m]=He(f,s[m].type)}return{displayName:null!==(a=e.name)&&void 0!==a?a:"Pipeline",runtimeConfig:{parameters:u,gcsOutputDirectory:t},pipelineSpec:c}}(o,C,K)).labels={sdk:"cloud-pipelines-editor","cloud-pipelines-editor-version":"0-0-1"},V=JSON.stringify(W,void 0,2),""!==P&&U("")}catch(z){z.toString()!==P&&U(z.toString())}}var Y=V&&URL.createObjectURL(new Blob([V],{type:"application/json"})),$=""!==m&&""!==g&&void 0!==W;return Object(J.jsxs)("form",{onSubmit:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i,s,u,p,l,d,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),void 0!==W){e.next=3;break}return e.abrupt("return");case 3:R(""),e.prev=4;try{null===(n=window.localStorage)||void 0===n||n.setItem(rt,C),null===(r=window.localStorage)||void 0===r||r.setItem(ot,m),null===(o=window.localStorage)||void 0===o||o.setItem(at,g)}catch(z){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",z)}return e.next=8,dt(m,g,W);case 8:a=e.sent,c=a.name,i=c.split("/").slice(-1)[0],s="https://console.cloud.google.com/vertex-ai/locations/".concat(g,"/pipelines/runs/").concat(i,"?project=").concat(m),R(s),y(""),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0),y(null!==(u=null===e.t0||void 0===e.t0||null===(p=e.t0.result)||void 0===p||null===(l=p.error)||void 0===l?void 0:l.message)&&void 0!==u?u:"Error"),null===(d=(b=window).gtag)||void 0===d||d.call(b,"event","GoogleCloud_submit_pipeline_job",{result:"failed"});case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),children:[void 0===o||0===(null!==(t=null===o||void 0===o||null===(n=o.inputs)||void 0===n?void 0:n.length)&&void 0!==t?t:0)?void 0:Object(J.jsxs)("fieldset",{style:{padding:"2px"},children:[Object(J.jsx)("legend",{children:"Arguments"}),Object(J.jsx)(X,{componentSpec:o,componentArguments:M,setComponentArguments:B,shrinkToWidth:!0})]}),Object(J.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(J.jsx)("label",{htmlFor:"project",children:"Project: "}),Object(J.jsx)("input",{id:"project",required:!0,type:"text",list:"projects",placeholder:"<my-project-id>",value:m,onChange:function(e){return v(e.target.value)}}),Object(J.jsx)("datalist",{id:"projects",children:s.map((function(e){return Object(J.jsx)("option",{value:e},e)}))}),Object(J.jsx)("button",{type:"button",onClick:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o,a,c,i,s,p,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt();case 3:o=e.sent,a=o.projects.map((function(e){return e.projectId})),u(a),y("");try{null===(c=window.localStorage)||void 0===c||c.setItem(ct,JSON.stringify(a))}catch(z){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",z)}null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_list_projects",{result:"succeeded"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),y(null!==(i=null===e.t0||void 0===e.t0||null===(s=e.t0.result)||void 0===s||null===(p=s.error)||void 0===p?void 0:p.message)&&void 0!==i?i:"Error"),null===(l=(d=window).gtag)||void 0===l||l.call(d,"event","GoogleCloud_list_projects",{result:"failed"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),children:"\u27f3"})]}),Object(J.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(J.jsx)("label",{htmlFor:"region",children:"Region: "}),Object(J.jsx)("input",{id:"region",required:!0,type:"text",list:"regions",value:g,onChange:function(e){return x(e.target.value)}}),Object(J.jsx)("datalist",{id:"regions",children:st.map((function(e){return Object(J.jsx)("option",{value:e},e)}))})]}),Object(J.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(J.jsx)("label",{htmlFor:"region",children:"GCS dir: "}),Object(J.jsx)("input",{id:"gcsOutputDirectory",required:!0,type:"text",value:C,onChange:function(e){return I(e.target.value)}})]}),Object(J.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(J.jsx)("input",{type:"submit",disabled:!$,value:"Submit pipeline job"}),""!==E&&Object(J.jsx)("a",{href:E,target:"_blank",rel:"noreferrer",style:{margin:"5px"},children:"Job"})]}),void 0!==Y&&Object(J.jsxs)("div",{style:{margin:"5px"},children:["Or download the"," ",Object(J.jsx)("a",{href:Y,download:"vertex_pipeline_job.json",children:"pipeline_job.json"})," ","file, then go to"," ",Object(J.jsx)("a",{href:"https://console.cloud.google.com/vertex-ai/pipelines",children:"Vertex Pipelines"})," ","and"," ",Object(J.jsx)("a",{href:"https://cloud.google.com/vertex-ai/docs/pipelines/run-pipeline#console",children:"create a new run"}),"."]}),""!==P&&Object(J.jsx)("div",{children:P}),""!==w&&Object(J.jsxs)("div",{children:["Error: ",w]})]})},ft=function(e){var t=e.componentSpec,n=Object(s.k)((function(e){return e.nodes})),r="";try{t=se(t,n,!0,!0);var o=nt(t);r=JSON.stringify(o,void 0,2)}catch(i){r=String(i)}var a=new Blob([r],{type:"application/json"}),c=URL.createObjectURL(a);return Object(J.jsxs)("details",{children:[Object(J.jsxs)("summary",{children:["Cloud IR ",Object(J.jsx)("a",{href:c,download:"vertex_pipeline_spec.json",children:"vertex_pipeline_spec.json"})]}),Object(J.jsx)("pre",{style:{overflow:"auto"},children:r})]})},bt="https://raw.githubusercontent.com/js-ts/component_check/main/test.pipeline.component.yaml",vt=["https://raw.githubusercontent.com/Ark-kun/pipelines/2edfd25b5ee3a4aa149c24a225a50041fbd3662d/components/XGBoost/_samples/sample_pipeline.pipeline.component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/237cd6bc0b6db26f615c22897be20aad77270b50/components/PyTorch/_samples/Train_fully-connected_network.pipeline.component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2765b13699ac28de523f499eeaa9eb2ed9b8798a/components/deprecated/tfx/_samples/TFX.pipeline.component.yaml",bt],ht=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,o,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=new Map),!("graph"in t.implementation)){e.next=19;break}r=0,o=Object.values(t.implementation.graph.tasks);case 3:if(!(r<o.length)){e.next=19;break}if(a=o[r],c=a.componentRef.url,void 0!==a.componentRef.spec||void 0===c){e.next=16;break}if(void 0!==(i=n.get(c))){e.next=13;break}return e.next=11,Te(c);case 11:i=e.sent,n.set(c,i);case 13:return a.componentRef.spec=i,e.next=16,ht(i,n);case 16:r++,e.next=3;break;case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jt=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],e.next=3,Te(t);case 3:if(r=e.sent,!n){e.next=8;break}return e.next=7,ht(r);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=n(70),xt=n(159),Ot=n(158),kt=n(160),wt=n(153),yt=n(156),_t=n(154),St=n(155),Ct=n(69),It="user_components",At=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(new Map),c=Object(i.a)(a,2),s=c[0],u=c[1],p=Object(r.useState)(),l=Object(i.a)(p,2),m=l[0],v=l[1],h=Object(r.useState)(),j=Object(i.a)(h,2),g=j[0],x=j[1],O=Object(r.useState)(!1),k=Object(i.a)(O,2),w=k[0],y=k[1],_=Object(r.useCallback)((function(){L(It).then(u)}),[u]);Object(r.useEffect)(_,[_]);var S=Object(r.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=Object(b.a)(f.a.mark((function e(){var n,r,a,c,i,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.result)&&void 0!==n){e.next=4;break}return console.error("Dropped file reader result was ".concat(n)),e.abrupt("return");case 4:return e.prev=4,e.next=7,P(It,n);case 7:c=e.sent,i=c.componentRef,console.debug("storeComponentText succeeded",i),null===(r=(a=window).gtag)||void 0===r||r.call(a,"event","UserComponents_component_import",{result:"succeeded"}),o(""),_(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(4),o("Error parsing the dropped file as component: ".concat(e.t0.toString(),".")),console.error("Error parsing the dropped file as component",e.t0),null===(s=(u=window).gtag)||void 0===s||s.call(u,"event","UserComponents_component_import",{result:"failed"});case 20:case"end":return e.stop()}}),e,null,[[4,15]])}))),t.readAsArrayBuffer(e)}))}),[_]),C=Object(r.useCallback)(function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,a,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(It,t);case 3:a=e.sent,c=a.componentRef,console.debug("addComponentToListByUrl succeeded",c),null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","UserComponents_component_import_from_url_succeeded"),o(""),_(),y(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),o("Error parsing the file as component: ".concat(e.t0.toString(),".")),console.error("Error importing component from the URL",e.t0),null===(i=(s=window).gtag)||void 0===i||i.call(s,"event","UserComponents_component_import_from_url_failed");case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[_]),I=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=5;break}return v(void 0),e.next=4,M(It,m);case 4:_();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=Object(Ct.a)({onDrop:S,accept:".yaml"}),T=A.getRootProps,E=A.getInputProps,R=A.isDragActive;return Object(J.jsxs)("div",{children:[Object(J.jsx)("button",{onClick:function(e){return y(!0)},style:{marginBottom:"4px"},children:"Import from URL"}),Object(J.jsxs)("div",Object(d.a)(Object(d.a)({},T()),{},{children:[Object(J.jsx)("input",Object(d.a)({},E())),Object(J.jsxs)("div",{style:{border:"1px solid black",padding:"4px",minHeight:"3em"},children:[R?"Drop the files here ...":n||"Drag and drop component.yaml files or click to select files",Array.from(s.entries()).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(J.jsx)(Pe,{componentReference:r.componentRef,onContextMenu:function(e){e.preventDefault(),x(e.currentTarget),v(n)}},n)}))]})]})),Object(J.jsx)(gt.a,{open:void 0!==m,anchorEl:g,onClose:function(){v(void 0)},children:Object(J.jsx)(xt.a,{dense:!0,onClick:I,children:"Delete"})}),Object(J.jsx)(Tt,{isOpen:w,onCancel:function(){return y(!1)},initialValue:"https://raw.githubusercontent.com/.../component.yaml",onImport:C})]})},Tt=function(e){var t=e.isOpen,n=e.onImport,o=e.onCancel,a=e.initialValue,c=Object(r.useRef)();return Object(J.jsxs)(Ot.a,{open:t,fullWidth:!0,children:[Object(J.jsx)(kt.a,{children:"Import component"}),Object(J.jsxs)("form",{onSubmit:function(e){c.current&&n(c.current.value),e.preventDefault()},children:[Object(J.jsx)(wt.a,{children:Object(J.jsx)(yt.a,{id:"name",type:"text",placeholder:a,label:"Component URL",inputRef:c,required:!0,autoFocus:!0,fullWidth:!0})}),Object(J.jsxs)(_t.a,{children:[Object(J.jsx)(St.a,{onClick:o,children:"Cancel"}),Object(J.jsx)(St.a,{color:"primary",type:"submit",autoFocus:!0,children:"Import"})]})]})]})},Et=function(e){var t=e.componentSpec,n=e.downloadFileName,r=void 0===n?"component.yaml":n,o=e.linkText,a=void 0===o?"component.yaml":o,c=e.linkRef,i=e.style,u=Object(s.k)((function(e){return e.nodes}));try{t=se(t,u,!1,!0)}catch(m){var p;if(!0!==(null===m||void 0===m||null===(p=m.message)||void 0===p?void 0:p.startsWith("The nodes array does not")))return console.error(m),Object(J.jsx)(J.Fragment,{children:"err.toString()"})}var l=B(t),d=new Blob([l],{type:"text/yaml"});return Object(J.jsx)("a",{ref:c,href:URL.createObjectURL(d),download:r,style:i,children:a})},Rt=function(e){var t=e.setComponentSpec,n=Object(r.useState)([]),o=Object(i.a)(n,2),a=o[0],c=o[1];return Object(r.useEffect)((function(){Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=5;break}return e.next=3,Promise.all(vt.map(function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,r=n.componentRef,e.next=6,ht(r.spec);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:t=e.sent,c(t);case 5:case"end":return e.stop()}}),e)})))()}),[a.length]),Object(J.jsx)("div",{style:{overflow:"auto",whiteSpace:"nowrap"},children:Object(J.jsx)("div",{style:{overflow:"auto",marginLeft:"10px"},children:a.map((function(e){var n;return Object(J.jsxs)("div",{children:["\u22ee ",Object(J.jsx)("button",{className:"link-button",onClick:function(n){null===t||void 0===t||t(e.spec)},children:null!==(n=e.spec.name)&&void 0!==n?n:"<Pipeline>"})]},e.digest)}))})})},Nt="user_pipelines",Dt=function(e,t){var n,r=Object(l.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.endsWith(o)&&(e=e.substring(0,e.length-o.length))}}catch(a){r.e(a)}finally{r.f()}return e},Pt=function(e){var t=e.isOpen,n=e.onPipelineSave,o=e.onCancel,a=e.initialName,c=Object(r.useState)(a),s=Object(i.a)(c,2),u=s[0],p=s[1],l=Object(r.useState)(!1),d=Object(i.a)(l,2),m=d[0],v=d[1],h=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t),e.prev=1,e.next=4,n(t,!1);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v(!0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Lt,{isOpen:t,onSave:h,onCancel:o,initialValue:u,inputLabel:"Pipeline name"}),Object(J.jsx)(Ut,{isOpen:t&&m,title:"Overwrite?",okButtonText:"Overwrite",onOk:function(){u&&(v(!1),n(u,!0))},onCancel:function(){v(!1)}})]})},Ut=function(e){var t=e.isOpen,n=e.title,r=e.okButtonText,o=void 0===r?"OK":r,a=e.cancelButtonText,c=void 0===a?"Cancel":a,i=e.onOk,s=e.onCancel;return Object(J.jsxs)(Ot.a,{open:t,"aria-labelledby":"alert-dialog-title",children:[Object(J.jsx)(kt.a,{id:"alert-dialog-title",children:n}),Object(J.jsxs)(_t.a,{children:[Object(J.jsx)(St.a,{color:"primary",onClick:s,children:c}),Object(J.jsx)(St.a,{color:"secondary",onClick:i,children:o})]})]})},Lt=function(e){var t=e.isOpen,n=e.onSave,o=e.onCancel,a=e.initialValue,c=e.inputLabel,i=void 0===c?"Pipeline name":c,s=Object(r.useRef)();return Object(J.jsxs)(Ot.a,{open:t,"aria-labelledby":"alert-dialog-title",children:[Object(J.jsx)(kt.a,{id:"alert-dialog-title",children:"Save pipeline"}),Object(J.jsxs)("form",{onSubmit:function(e){s.current&&n(s.current.value),e.preventDefault()},children:[Object(J.jsx)(wt.a,{children:Object(J.jsx)(yt.a,{id:"name",type:"text",defaultValue:a,label:i,inputRef:s,required:!0,autoFocus:!0,fullWidth:!0,margin:"dense"})}),Object(J.jsxs)(_t.a,{children:[Object(J.jsx)(St.a,{onClick:o,children:"Cancel"}),Object(J.jsx)(St.a,{color:"primary",type:"submit",autoFocus:!0,children:"Save"})]})]})]})},Gt=function(e){var t=e.componentSpec,n=e.setComponentSpec,o=Object(r.useState)(new Map),a=Object(i.a)(o,2),c=a[0],u=a[1],p=Object(r.useState)(),l=Object(i.a)(p,2),d=l[0],m=l[1],v=Object(r.useState)(!1),h=Object(i.a)(v,2),j=h[0],x=h[1],O=Object(s.k)((function(e){return e.nodes})),k=Object(r.useState)(),w=Object(i.a)(k,2),y=w[0],_=w[1],S=Object(r.useState)(),C=Object(i.a)(S,2),A=C[0],T=C[1],E=Object(r.useCallback)((function(){L(Nt).then(u)}),[u]);Object(r.useEffect)(E,[E]);var R=Object(r.useCallback)(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(t.componentRef.spec);case 2:null===n||void 0===n||n(t.componentRef.spec),m(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,m]),N=Object(r.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=Object(b.a)(f.a.mark((function n(){var r,o,a,c,i,s,u,p,l,d;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=t.result)&&void 0!==r){n.next=4;break}return console.error("Dropped file reader result was ".concat(r)),n.abrupt("return");case 4:return o=Dt(e.name,[".pipeline.component.yaml",".component.yaml",".pipeline.yaml",".yaml"])||"Pipeline",n.prev=5,n.next=8,I(r);case 8:if(i=n.sent,s=i.componentRef,g(s.spec.implementation)){n.next=13;break}return console.error("Dropped component is not a graph component"),n.abrupt("return");case 13:return n.next=15,ht(s.spec);case 15:return n.next=17,P(Nt,r,o);case 17:u=n.sent,p=u.componentRef,console.debug("storeComponentText succeeded",p),null===(a=(c=window).gtag)||void 0===a||a.call(c,"event","PipelineLibrary_pipeline_import",{result:"succeeded"}),E(),n.next=28;break;case 24:n.prev=24,n.t0=n.catch(5),console.error("Error parsing the dropped file as component",n.t0),null===(l=(d=window).gtag)||void 0===l||l.call(d,"event","PipelineLibrary_pipeline_import",{result:"failed"});case 28:case"end":return n.stop()}}),n,null,[[5,24]])}))),t.readAsArrayBuffer(e)}))}),[E]),D=Object(r.useCallback)((function(){x(!0)}),[x]),V=Object(r.useCallback)((function(){x(!1)}),[x]),W=Object(r.useCallback)(function(){var e=Object(b.a)(f.a.mark((function e(n){var r,o,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.length>1&&void 0!==c[1]&&c[1]){e.next=7;break}return e.next=4,G(Nt,n);case 4:if(null===e.sent){e.next=7;break}throw Error('File "'.concat(n,'" already exists.'));case 7:if(t){e.next=9;break}return e.abrupt("return");case 9:return(r=se(t,O,!1,!0)).name=n,o=B(r),e.next=14,U(Nt,n,o);case 14:return a=e.sent,e.next=17,R(a);case 17:V(),E();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,V,O,R,E]),F=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=5;break}return _(void 0),e.next=4,M(Nt,y);case 4:E();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=10;break}return _(void 0),e.next=4,G(Nt,y);case 4:if(t=e.sent){e.next=8;break}return console.error("handleContextMenuOpen: File ".concat(y," does not exist.")),e.abrupt("return");case 8:return e.next=10,R(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=Object(r.useRef)(null),q=Object(r.useRef)(null);return Object(J.jsxs)("div",{style:{overflow:"auto",whiteSpace:"nowrap"},children:[Object(J.jsxs)("div",{style:{margin:"5px"},children:[Object(J.jsx)("button",{onClick:function(e){d?W(null===d||void 0===d?void 0:d.name,!0):D()},children:"Save"}),Object(J.jsx)("button",{onClick:D,children:"Save as"}),t&&Object(J.jsx)(Pt,{initialName:t.name,isOpen:j,onCancel:V,onPipelineSave:W}),Object(J.jsx)("input",{ref:H,type:"file",accept:".yaml",onChange:function(e){var t;return N(Array.from(null!==(t=e.target.files)&&void 0!==t?t:[]))},style:{display:"none"}}),Object(J.jsx)("button",{onClick:function(e){var t;return null===(t=H.current)||void 0===t?void 0:t.click()},children:"+ Import"}),Object(J.jsx)("button",{onClick:function(e){var t;null===(t=q.current)||void 0===t||t.click()},children:"Export"}),t&&Object(J.jsx)(Et,{linkRef:q,componentSpec:t,linkText:"\ud83d\udd17",downloadFileName:(t.name?t.name+".":"")+"pipeline.component.yaml",style:{textDecoration:"none"}})]}),Object(J.jsxs)("div",{style:{overflow:"auto",marginLeft:"10px"},children:[Array.from(c.entries()).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(J.jsxs)("div",{children:["\u22ee ",Object(J.jsx)("button",{className:"link-button",onClick:function(e){return R(r)},style:n===(null===d||void 0===d?void 0:d.name)?{fontWeight:"bold"}:void 0,onContextMenu:function(e){e.preventDefault(),T(e.currentTarget),_(n)},children:n})]},n)})),Object(J.jsxs)(gt.a,{open:void 0!==y,anchorEl:A,onClose:function(){_(void 0)},children:[Object(J.jsx)(xt.a,{dense:!0,onClick:X,children:"Open"}),Object(J.jsx)(xt.a,{dense:!0,onClick:F,children:"Delete"})]})]}),Object(J.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(J.jsx)("summary",{children:Object(J.jsx)("strong",{children:"Sample pipelines"})}),Object(J.jsx)(Rt,{setComponentSpec:n})]})]})},Mt=[{category:"Quick start",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/2463ecda532517462590d75e6e14a8af6b55869a/components/datasets/Chicago_Taxi_Trips/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/XGBoost/Train/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/XGBoost/Predict/component.yaml"]},{category:"Datasets",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/2463ecda532517462590d75e6e14a8af6b55869a/components/datasets/Chicago_Taxi_Trips/component.yaml"]},{category:"Data manipulation",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/pandas/Transform_DataFrame/in_CSV_format/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/dataset_manipulation/split_data_into_folds/in_CSV/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Build_dict/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Build_list/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Build_list_of_strings/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Build_list_of_integers/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Build_list_of_floats/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Combine_lists/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Get_element_by_index/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Get_element_by_key/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/json/Query/component.yaml"]},{category:"Upload/Download",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/web/Download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/upload_to_unique_uri/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/upload_to_explicit_uri/component.yaml"]},{category:"XGBoost",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/XGBoost/Train/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/XGBoost/Predict/component.yaml"]},{category:"PyTorch",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/PyTorch/Create_fully_connected_network/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/PyTorch/Train_PyTorch_model/from_CSV/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/PyTorch/Convert_to_OnnxModel_from_PyTorchScriptModule/component.yaml"]},{category:"Google Cloud",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/Vertex_AI/AutoML/Tables/Create_dataset/from_CSV/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/00d020c29a144cee7fd35f2d05053addb942f536/components/google-cloud/Vertex_AI/AutoML/Tables/Create_dataset/from_GCS/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/00d020c29a144cee7fd35f2d05053addb942f536/components/google-cloud/Vertex_AI/AutoML/Tables/Create_dataset/from_BigQuery/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/Vertex_AI/AutoML/Tables/Train_model/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/2c24c0c0730c818b89f676c4dc5c9d6cb90ab01d/components/google-cloud/Vertex_AI/Models/Upload_XGBoost_model/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/b2cdd60fe93d609111729ef64e79a8b8a2713435/components/google-cloud/Vertex_AI/Models/Deploy_to_endpoint/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/d45e011ad8b62b4fe36c12289a624e5e1573c68d/components/google-cloud/Vertex_AI/Models/Export/to_GCS/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/upload_to_explicit_uri/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/upload_to_unique_uri/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/storage/list/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/google-cloud/Optimizer/Suggest_parameter_sets_based_on_measurements/component.yaml"]},{category:"TFX",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/ExampleGen/CsvExampleGen/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/StatisticsGen/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/SchemaGen/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/ExampleValidator/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/Transform/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/Trainer/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/47f3621344c884666a926c8a15d77562f1cc5e0a/components/deprecated/tfx/Evaluator/component.yaml"]}],Bt=function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"},Vt=function(e){var t=e.componentSpec,n=e.setComponentSpec;return Object(J.jsxs)("aside",{className:"nodeList",children:[Object(J.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(J.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Save/Load pipeline"}),Object(J.jsx)(Gt,{componentSpec:t,setComponentSpec:n})]}),Object(J.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(J.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Submit to Google Cloud"}),Object(J.jsx)(mt,{componentSpec:t})]}),Object(J.jsx)("h3",{children:"Drag components to the canvas:"}),Object(J.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(J.jsx)("summary",{children:Object(J.jsx)("strong",{children:"Special"})}),Object(J.jsx)("div",{className:"react-flow__node react-flow__node-input sidebar-node",onDragStart:function(e){return Bt(e,{input:{label:"Input"}})},draggable:!0,children:"Input"}),Object(J.jsx)("div",{className:"react-flow__node react-flow__node-output sidebar-node",onDragStart:function(e){return Bt(e,{output:{label:"Output"}})},draggable:!0,children:"Output"})]}),Object(J.jsx)(Ge,{componentGroups:Mt}),Object(J.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(J.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"User components"}),Object(J.jsx)(At,{})]}),Object(J.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(J.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Component search"}),Object(J.jsx)(Be,{})]}),Object(J.jsxs)("details",{children:[Object(J.jsx)("summary",{children:"Debug"}),t&&Object(J.jsx)(Ve,{componentSpec:t}),t&&Object(J.jsx)(ft,{componentSpec:t}),Object(J.jsx)("button",{type:"button",onClick:function(e){jt("https://raw.githubusercontent.com/Ark-kun/pipelines/b45c82e42588ee0a86b8875d1908d972275bfd2f/samples/test/data_passing.pipeline.component.yaml").then(n)},children:"Load Data Passing pipeline"})]})]})},Wt=(n(119),"autosaved.component.yaml"),Ft=function(e){var t=e.componentSpec,n=Object(s.k)((function(e){return e.nodes}));return void 0!==n&&n.length>0&&function(e,t){try{void 0!==t&&(0===t.length&&console.warn("saveComponentSpec: nodes.length === 0"),e=se(e,t,!0,!0));var n=B(e);window.sessionStorage.setItem(Wt,n)}catch(o){var r;!0!==(null===o||void 0===o||null===(r=o.message)||void 0===r?void 0:r.startsWith("The nodes array does not"))&&console.error(o)}}(t,n),null},Jt=function(){return window.navigator.platform.startsWith("Mac")||window.navigator.platform.startsWith("iPhone")||window.navigator.platform.startsWith("iPad")||window.navigator.platform.startsWith("iPod")},Xt=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],o=t[1];if(void 0===n){var a=function(){try{var e=window.sessionStorage.getItem(Wt);if(null!==e){var t=p.a.load(e);if(null!==t&&"object"===typeof t)return t}}catch(n){console.error(n)}}();void 0===a?jt(bt).then(o):o(a)}return void 0===n?Object(J.jsx)(J.Fragment,{}):Object(J.jsx)("div",{className:"dndflow",children:Object(J.jsxs)(s.g,{children:[Object(J.jsx)("div",{className:"reactflow-wrapper",children:Object(J.jsxs)(pe,{componentSpec:n,setComponentSpec:o,deleteKeyCode:Jt()?"Backspace":"Delete",multiSelectionKeyCode:Jt()?"Command":"Control",snapToGrid:!0,snapGrid:[10,10],children:[Object(J.jsx)(s.e,{}),Object(J.jsx)(s.c,{}),Object(J.jsx)(s.b,{gap:10})]})}),Object(J.jsx)(Vt,{componentSpec:n,setComponentSpec:o}),Object(J.jsx)(Ft,{componentSpec:n})]})})};var Ht=function(){return Object(J.jsx)("footer",{className:"footer",style:{width:"100%",height:"30px",padding:"4px",textAlign:"center",backgroundColor:"ghostwhite"},children:Object(J.jsx)("div",{style:{display:"inline-block"}})})};var qt=function(){return Object(J.jsxs)("div",{className:"App",style:{width:"100%",height:"calc(100% - 30px)"},children:[Object(J.jsx)(Xt,{}),Object(J.jsx)(Ht,{})]})},Kt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Yt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var $t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))};c.a.render(Object(J.jsx)(o.a.StrictMode,{children:Object(J.jsx)(qt,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/kfp-editor-test",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/kfp-editor-test","/service-worker.js");Kt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Yt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Yt(t,e)}))}}(),$t()},85:function(e,t,n){},86:function(e,t,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.6153304a.chunk.js.map